<form action="#">
  <div class="flex flex-col gap-8 mx-auto max-w-md">
    <div>
      <label for="name">Nombre</label>
      <div class="mt-2">
        <input type="text" name="name" id="nombre" required />
      </div>
    </div>

    <div>
      <label for="phone">Cantidad de Personas</label>
      <div class="mt-2">
        <input type="text" name="phone" id="cantidad" required />
      </div>
      <!-- <small class="italic text-gray-500">We will call you to confirm your reservation</small> -->
    </div>

    <div>
      <label for="date">Fecha y Hora</label>
      <div class="mt-2">
        <input type="datetime-local" name="date" id="fecha" required />
      </div>
    </div>

    <div>
      <label for="message">Nota</label>
      <div class="mt-2">
        <textarea
          name="message"
          id="nota"
          rows="4"
          required
          placeholder="Háganos saber si tiene alguna alergia o tiene algun plato en mente."
        ></textarea>
      </div>
    </div>

    <div>
      <button type="submit" id="btnreserva" class="button button-green group !px-8">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 -rotate-45 -mt-1 inline-block mr-1 group-hover:rotate-0 transition duration-300"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"
          ></path>
        </svg>
        Reservar
      </button>
    </div>
  </div>
</form>

<script>

  var btn = document.getElementById("btnreserva");
  

  btn!.onclick = () => {
var nombre = (document.getElementById("nombre")as HTMLInputElement).value;
  var cantidad =( document.getElementById("cantidad") as HTMLInputElement).value;
  var fechaInput = (document.getElementById("fecha")as HTMLInputElement).value;
  var nota = (document.getElementById("nota")as HTMLInputElement).value;

  const fecha = new Date(fechaInput);

// Opcional: formatear la fecha en español
const opciones: Intl.DateTimeFormatOptions = {
  weekday: 'long', // "lunes"
  year: 'numeric',
  month: 'long',   // "junio"
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
  hour12: true, 
};

const fechaFormateada = fecha.toLocaleString('es-ES', opciones);
  var mensaje =encodeURIComponent(`Hola, mi nombre es ${nombre}. Me gustaría realizar una reservación para ${cantidad} personas el día ${fechaFormateada}.\n\nNota: ${nota}.\n\nAgradezco su confirmación. Quedo atento(a) a su respuesta.`);

    window.open(`https://api.whatsapp.com/send/?phone=18097659356&text=${mensaje}&type=phone_number&app_absent=0`);
  };
</script>
